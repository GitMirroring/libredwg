{"version":1,"ops":[{"type":1,"author":{"id":"3b6fe13aeb581c485dd76b9f41ed9b708e1880cd"},"timestamp":1576834957,"metadata":{"github-id":"MDU6SXNzdWU1NDA4OTQ5OTc=","github-url":"https://github.com/LibreDWG/libredwg/issues/175","origin":"github"},"title":"Docker image make check fails on import libxml2","message":"I am trying to build libredwg docker image\nbased on the following dockerfile: \n\n```\nFROM debian:sid\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN sed -i 's/archive/ru.archive/g' /etc/apt/sources.list \\\n \u0026\u0026 apt-get update                                        \\\n \u0026\u0026 apt-get install -y git make gcc autoconf libtool      \\\n        pkg-config libxml2-dev dejagnu python-dev swig    \\\n\tzlib1g-dev texinfo                                \\\n \u0026\u0026 apt-get clean                                         \\\n \u0026\u0026 rm -rf /var/lib/{apt,dpkg,cache,log}/\n\nRUN git clone git://git.sv.gnu.org/libredwg.git\n```\n)\n\nIn the interactive container I try to execute the following:\n```\nsh ./autogen.sh\n./configure\nmake \nmake check \n```\n\nWhich gives:\nWarnings during `make`:\n```\nbits.c:1160:2: warning: #warning x86_64 gcc-9.2 codegen is seriously broken! better use an older version [-Wcpp]\n 1160 | #warning x86_64 gcc-9.2 codegen is seriously broken! better use an older version\n```\n```\n/usr/include/x86_64-linux-gnu/bits/string_fortified.h:106:10: warning: '__builtin_strncpy' output may be truncated copying 70 bytes from a string of length 79 [-Wstringop-truncation]\n  106 |   return __builtin___strncpy_chk (__dest, __src, __len, __bos (__dest));\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n```\n\nErrors during `make check`:\n```\nmake  check-TESTS\nmake[4]: Entering directory '/home/libredwg/test/xmlsuite'\nTraceback (most recent call last):\n  File \"./check.py\", line 8, in \u003cmodule\u003e\n    from helper import *\n  File \"/home/libredwg/test/xmlsuite/helper.py\", line 2, in \u003cmodule\u003e\n    import libxml2\nImportError: No module named libxml2\nFAIL: check.py\n```\n\nWarnings during `make check`:\n```\ntests_common.h:28:1: warning: 'ms_printf' is an unrecognized format function type [-Wformat=]\n   28 | static void fail (const char *fmt, ...) ATTRIBUTE_FORMAT (1, 2);\ntests_common.h:52:3: warning: function 'ok' might be a candidate for 'gnu_printf' format attribute [-Wsuggest-attribute=format]\n   52 |   vsnprintf (buffer, sizeof (buffer), fmt, ap);\ntests_common.h: In function 'fail':\ntests_common.h:72:3: warning: function 'fail' might be a candidate for 'gnu_printf' format attribute [-Wsuggest-attribute=format]\n   72 |   vsnprintf (buffer, sizeof (buffer), fmt, ap);\nIn file included from hash_test.c:6:\ntests_common.h:28:1: warning: 'ms_printf' is an unrecognized format function type [-Wformat=]\n   28 | static void fail (const char *fmt, ...) ATTRIBUTE_FORMAT (1, 2);\n```\n\n\nCould you please help to make a good docker image where I could test dwg to svg functionality and figure what is wrong?","files":null}]}