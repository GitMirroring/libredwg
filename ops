{"version":1,"ops":[{"type":6,"author":{"id":"3b6fe13aeb581c485dd76b9f41ed9b708e1880cd"},"timestamp":1576834973,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMyODA2ODg0OA=="},"target":"56feb218f69e307b560d23245b7d30ead9db0d098e939ca22bcd12445cabd1da","message":"I am trying to build libredwg docker image\nbased on the following dockerfile: \n\n```\nFROM debian:sid\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN sed -i 's/archive/ru.archive/g' /etc/apt/sources.list \\\n \u0026\u0026 apt-get update                                        \\\n \u0026\u0026 apt-get install -y git make gcc autoconf libtool      \\\n        pkg-config libxml2-dev dejagnu python-dev swig    \\\n\tzlib1g-dev texinfo                                \\\n \u0026\u0026 apt-get clean                                         \\\n \u0026\u0026 rm -rf /var/lib/{apt,dpkg,cache,log}/\n\nRUN git clone git://git.sv.gnu.org/libredwg.git\n```\n)\n\nIn the interactive container I try to execute the following:\n```\nsh ./autogen.sh\nCFLAGS=-I/usr/include/libxml2 ./configure\n./configure\nmake \nmake check \n```\n\nWhich gives:\nWarnings during `make`:\n```\nbits.c:1160:2: warning: #warning x86_64 gcc-9.2 codegen is seriously broken! better use an older version [-Wcpp]\n 1160 | #warning x86_64 gcc-9.2 codegen is seriously broken! better use an older version\n```\n```\n/usr/include/x86_64-linux-gnu/bits/string_fortified.h:106:10: warning: '__builtin_strncpy' output may be truncated copying 70 bytes from a string of length 79 [-Wstringop-truncation]\n  106 |   return __builtin___strncpy_chk (__dest, __src, __len, __bos (__dest));\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n```\n\nErrors during `make check`:\n```\nmake  check-TESTS\nmake[4]: Entering directory '/home/libredwg/test/xmlsuite'\nTraceback (most recent call last):\n  File \"./check.py\", line 8, in \u003cmodule\u003e\n    from helper import *\n  File \"/home/libredwg/test/xmlsuite/helper.py\", line 2, in \u003cmodule\u003e\n    import libxml2\nImportError: No module named libxml2\nFAIL: check.py\n```\n\nWarnings during `make check`:\n```\ntests_common.h:28:1: warning: 'ms_printf' is an unrecognized format function type [-Wformat=]\n   28 | static void fail (const char *fmt, ...) ATTRIBUTE_FORMAT (1, 2);\ntests_common.h:52:3: warning: function 'ok' might be a candidate for 'gnu_printf' format attribute [-Wsuggest-attribute=format]\n   52 |   vsnprintf (buffer, sizeof (buffer), fmt, ap);\ntests_common.h: In function 'fail':\ntests_common.h:72:3: warning: function 'fail' might be a candidate for 'gnu_printf' format attribute [-Wsuggest-attribute=format]\n   72 |   vsnprintf (buffer, sizeof (buffer), fmt, ap);\nIn file included from hash_test.c:6:\ntests_common.h:28:1: warning: 'ms_printf' is an unrecognized format function type [-Wformat=]\n   28 | static void fail (const char *fmt, ...) ATTRIBUTE_FORMAT (1, 2);\n```\n\n\nCould you please help to make a good docker image where I could test dwg to svg functionality and figure what is wrong?","files":null},{"type":6,"author":{"id":"3b6fe13aeb581c485dd76b9f41ed9b708e1880cd"},"timestamp":1576835001,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMyODA2OTA2NA=="},"target":"56feb218f69e307b560d23245b7d30ead9db0d098e939ca22bcd12445cabd1da","message":"I am trying to build libredwg docker image\nbased on the following dockerfile: \n\n```\nFROM debian:sid\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN sed -i 's/archive/ru.archive/g' /etc/apt/sources.list \\\n \u0026\u0026 apt-get update                                        \\\n \u0026\u0026 apt-get install -y git make gcc autoconf libtool      \\\n        pkg-config libxml2-dev dejagnu python-dev swig    \\\n\tzlib1g-dev texinfo                                \\\n \u0026\u0026 apt-get clean                                         \\\n \u0026\u0026 rm -rf /var/lib/{apt,dpkg,cache,log}/\n\nRUN git clone git://git.sv.gnu.org/libredwg.git\n```\n)\n\nIn the interactive container I try to execute the following:\n```\nsh ./autogen.sh\nCFLAGS=-I/usr/include/libxml2 ./configure\n./configure\nmake \nmake check \n```\n\nWhich gives:\nWarnings during `make`:\n```\nbits.c:1160:2: warning: #warning x86_64 gcc-9.2 codegen is seriously broken! better use an older version [-Wcpp]\n 1160 | #warning x86_64 gcc-9.2 codegen is seriously broken! better use an older version\n```\n```\n/usr/include/x86_64-linux-gnu/bits/string_fortified.h:106:10: warning: '__builtin_strncpy' output may be truncated copying 70 bytes from a string of length 79 [-Wstringop-truncation]\n  106 |   return __builtin___strncpy_chk (__dest, __src, __len, __bos (__dest));\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n```\n\nErrors during `make check`:\n```\nmake  check-TESTS\nmake[4]: Entering directory '/home/libredwg/test/xmlsuite'\nTraceback (most recent call last):\n  File \"./check.py\", line 8, in \u003cmodule\u003e\n    from helper import *\n  File \"/home/libredwg/test/xmlsuite/helper.py\", line 2, in \u003cmodule\u003e\n    import libxml2\nImportError: No module named libxml2\nFAIL: check.py\n```\n\nAdditional warnings during `make check`:\n```\ntests_common.h:28:1: warning: 'ms_printf' is an unrecognized format function type [-Wformat=]\n   28 | static void fail (const char *fmt, ...) ATTRIBUTE_FORMAT (1, 2);\ntests_common.h:52:3: warning: function 'ok' might be a candidate for 'gnu_printf' format attribute [-Wsuggest-attribute=format]\n   52 |   vsnprintf (buffer, sizeof (buffer), fmt, ap);\ntests_common.h: In function 'fail':\ntests_common.h:72:3: warning: function 'fail' might be a candidate for 'gnu_printf' format attribute [-Wsuggest-attribute=format]\n   72 |   vsnprintf (buffer, sizeof (buffer), fmt, ap);\nIn file included from hash_test.c:6:\ntests_common.h:28:1: warning: 'ms_printf' is an unrecognized format function type [-Wformat=]\n   28 | static void fail (const char *fmt, ...) ATTRIBUTE_FORMAT (1, 2);\n```\n\n\nCould you please help to make a good docker image where I could test dwg to svg functionality and figure what is wrong?","files":null},{"type":3,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1576839079,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2Nzg3OTg4Mg==","github-url":"https://github.com/LibreDWG/libredwg/issues/175#issuecomment-567879882"},"message":"debian:sid needs also `python-libxml2` for the tests. that's your problem.\nconfigure should really check for that.\n\non debian gcc-9.2 is really broken, but I recently had better experiences on fedora 31 gcc-9.2, don't know what redhat had fixed there. on mingw64 it's also broken.\nmaybe an alpine, void or fedora docker is better?\n\nThe ms_printf warnings are my fault, will be fixed. but it's harmless.\nThe new strncpy truncation warning seems to be harmless, I'll check.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1576839079,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMyODEwMzE3Ng=="},"target":"2e59bb248bd8347d9b10153f2467da17edbb643a05604ace20104b6a0b843082","message":"debian:sid needs also `python-libxml2` for the tests. that's your problem.\nconfigure should really check for that.\n\non debian gcc-9.2 is really broken, but I recently had better experiences on fedora 31 gcc-9.2, don't know what redhat had fixed there. on mingw64 it's also broken.\nmaybe an alpine, void or fedora docker is better?\n\nThe ms_printf warnings are my fault, will be fixed. but it's harmless.\nThe new strncpy truncation warning seems to be harmless, I'll check.\n\ndwg2SVG is lacking many serious features.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1576839947,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMyODEwOTc0OQ=="},"target":"2e59bb248bd8347d9b10153f2467da17edbb643a05604ace20104b6a0b843082","message":"debian:sid needs also `python-libxml2` for the tests. that's your problem.\nconfigure should really check for that.\n\n`./configure --disable-bindings` is recommended for such a small target.\n\non debian gcc-9.2 is really broken, but I recently had better experiences on fedora 31 gcc-9.2, don't know what redhat had fixed there. on mingw64 it's also broken.\nmaybe an alpine, void or fedora docker is better?\n\nThe ms_printf warnings are my fault, will be fixed. but it's harmless.\nThe new strncpy truncation warning seems to be harmless, I'll check.\n\ndwg2SVG is lacking many serious features.","files":null},{"type":3,"author":{"id":"3b6fe13aeb581c485dd76b9f41ed9b708e1880cd"},"timestamp":1576841754,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2Nzg5NTc3Ng==","github-url":"https://github.com/LibreDWG/libredwg/issues/175#issuecomment-567895776"},"message":"Could you please share with me a dockerfile setup that works for you?","files":null},{"type":3,"author":{"id":"3b6fe13aeb581c485dd76b9f41ed9b708e1880cd"},"timestamp":1576841911,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2Nzg5NjQ4Mg==","github-url":"https://github.com/LibreDWG/libredwg/issues/175#issuecomment-567896482"},"message":"For dwg2SVG I am mostly looking into extracting the texts (and its positions)","files":null},{"type":3,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1577272016,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2ODg4NjY3NA==","github-url":"https://github.com/LibreDWG/libredwg/issues/175#issuecomment-568886674"},"message":"Sorry, I don't have docker. The CI instances use docker, look at `.travis.yml` or the other yml's for a clean setup with all reqs.","files":null},{"type":4,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1577272016,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjkwNzg5OTk2Ng=="},"status":2}]}