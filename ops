{"version":1,"ops":[{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527842456,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxNzI0NzEw"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe parent points to the  _dwg_object_{entity, object}, which points via the object field to the _dwg_object.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527842479,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxNzI0ODY0"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527860063,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxODIyMTU4"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.\n\nbut beware that adding objects (realloc) moves and invalidates all internal cross pointers.\neither scan the objects twice for the final size (but then we cannot add objects later, when writing), or make the parent link a handle or objid index.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527860120,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxODIyNTA4"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.\n\nbut beware that adding objects (realloc) moves and invalidates all internal cross pointers.\neither scan the objects twice for the final size (but then we cannot add objects later, when writing), or make the parent link a handle or objid index.\n\nalso when adding objects and a realloc happened, we need to re-resolve all handles/links.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527860257,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxODIzNDQx"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.\n\nbut beware that adding objects (realloc) moves and invalidates all internal cross pointers.\neither scan the objects twice for the final size (but then we cannot add objects later, when writing), or make the parent link a handle or objid index.\n\nalso when adding objects and a realloc happened, we need to re-resolve all handles/links. this btw is a release blocker, as we already added the add API.\nfor better performance alloc in bigger chunks, so we can skip the scan most of the times.\ndwg_add needs to trigger a rescan flag btw.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527863388,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxODQ0NDgw"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.\n\nbut beware that adding objects (realloc) moves and invalidates all internal cross pointers to Dwg_Object*, but not Dwg_Object_OBJECT*. Those are not realloced. Also not the object substructs.\n\nEither scan the objects twice for the final size (but then we cannot add objects later, when writing), or make the parent link a handle or objid index.\n\nAlso when adding objects and a realloc happened, we need to re-resolve all handles/links. this btw is a release blocker, as we already added the add API.\nfor better performance alloc in bigger chunks, so we can skip the scan most of the times.\ndwg_add needs to trigger a rescan flag btw.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527863411,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxODQ0NjM3"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.\n\nBut beware that adding objects (realloc) moves and invalidates all internal cross pointers to Dwg_Object*, but not Dwg_Object_OBJECT*. Those are not realloced. Also not the object substructs.\n\nEither scan the objects twice for the final size (but then we cannot add objects later, when writing), or make the parent link a handle or objid index.\n\nAlso when adding objects and a realloc happened, we need to re-resolve all handles/links. this btw is a release blocker, as we already added the add API.\nfor better performance alloc in bigger chunks, so we can skip the scan most of the times.\ndwg_add needs to trigger a rescan flag btw.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527864275,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkxODUwMjY5"},"target":"b2cac50dbe79a86e13e1acd0129047c289c3779bf0543ef73d72fc2db121c5ae","message":"we have to jump through absurd hurdles in the API to get around that.\nthe `parent` points to the  `_dwg_object_{entity, object}`, which points via the `object` field to the `_dwg_object`.\n\nBut beware that adding objects (realloc) moves and invalidates all internal cross pointers to Dwg_Object*, but not Dwg_Object_OBJECT*. Those are not realloced. Also not the object substructs.\nThey only problem I see are the dwg_{obj,ent}_obj-\u003eobject links to the dwg_object*. \nThey need to be replaced by an objid.\n\nEither scan the objects twice for the final size (but then we cannot add objects later, when writing), or make the parent link a handle or objid index.\n\nAlso when adding objects and a realloc happened, we need to re-resolve all handles/links. this btw is a release blocker, as we already added the add API.\nfor better performance alloc in bigger chunks, so we can skip the scan most of the times.\ndwg_add needs to trigger a rescan flag btw.","files":null},{"type":5,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527850875,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2NTgwNDgxNjM="},"added":["enhancement"],"removed":[]},{"type":5,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527860349,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2NTgzMjk0Nzk="},"added":["blocking"],"removed":[]},{"type":3,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527937585,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5NDA3ODg0NQ==","github-url":"https://github.com/LibreDWG/libredwg/issues/11#issuecomment-394078845"},"message":"dwg_add_* realloc triggers now a rescan, and dirty the ref cache. \nreading any ref will update it's obj. for now once the dirty flag is set, we cannot turn it off again. reconsider that eventually.","files":null},{"type":6,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527937585,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDkyMTA4Mzc0"},"target":"5691443937ba54c58473b289232a682c388eca19b055e3544c0e178a8ab90ec1","message":"dwg_add_* realloc triggers now a rescan, and dirty the ref cache. \nreading any ref will update it's obj. for now once the dirty flag is set, we cannot turn it off again. reconsider that eventually.\n\nrealloc's happen now only after every 128'th dwg_add.","files":null},{"type":4,"author":{"id":"b57a4f5420adf835b8b83469143e813bd4f12c78"},"timestamp":1527941024,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTY1OTYwMTUxOQ=="},"status":2}]}